<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:with="content=~{::.dashboard-content}, pageTitle='My Dashboard'"
      th:replace="~{layout :: ~{}}">
<body>
<div class="dashboard-content">
    <h1>My Borrowing History</h1>

    <div th:if="${#lists.isEmpty(borrowingHistory)}">
        <p>You have no borrowing history.</p>
    </div>

    <table th:unless="${#lists.isEmpty(borrowingHistory)}">
        <thead>
        <tr>
            <th>Title</th>
            <th>Author</th>
            <th>Borrow Date</th>
            <th>Due Date</th>
            <th>Return Date</th>
            <th>Status</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="record : ${borrowingHistory}">
            <td th:text="${record.bookCopy.book.title}"></td>
            <td th:text="${record.bookCopy.book.author}"></td>
            <td th:text="${record.borrowDate}"></td>
            <td th:text="${record.dueDate}"></td>
            <td th:text="${record.returnDate != null ? record.returnDate : 'Not Returned'}"></td>
            <td th:text="${record.status}"></td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>